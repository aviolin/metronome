{"version":3,"sources":["worker.js","Canvas.js","Animation.js","Button.js","TempoInputs.js","Metronome.js","Spinner.js","index.js"],"names":["addMethods","methods","module","exports","w","Worker","name","Canvas","props","canvasRef","React","createRef","resetCanvas","bind","window","onorientationchange","onresize","curNote","this","drawCanvas","current","width","innerWidth","scrollTo","canvas","ctx","getContext","fillStyle","theme","background","globalAlpha","fillRect","height","circleRadius","Math","min","beatsPerBar","i","light","shadowBlur","beat","click","isplaying","shadowColor","beginPath","arc","PI","fill","className","ref","id","Component","Animation","state","lastNoteDrawn","nextNoteTime","percentage","updateAnimation","rAF","requestAnimationFrame","currentTime","audiocontext","notesInQueue","queue","currentNote","length","time","splice","tempo","nbt","setState","cancelAnimationFrame","Button","increment","onClick","Slider","type","minTempo","max","maxTempo","step","value","onChange","TempoInputs","Note","PlayButton","playElement","icon","faPlay","stopElement","faStop","Metronome","noteLength","lookahead","scheduleAheadTime","nextBeat","nextBeatTime","nextClick","nextClickTime","isPlaying","audioUnlocked","noteQueue","clicksPerBeat","handleChange","handleClick","handleTick","AudioContext","webkitAudioContext","audioContext","sampleRate","unlockAudio","timerWorker","worker","onmessage","e","data","console","log","postMessage","note","osc","createOscillator","gainNode","createGain","connect","destination","frequency","start","gain","setTargetAtTime","stop","secondsPerBeat","nextNote","scheduleNote","concat","buffer","createBuffer","node","createBufferSource","document","getElementById","classList","remove","offsetWidth","add","nextTempo","target","fadeAnimation","parseInt","close","Navbar","faMusic","toggleTheme","faSun","faMoon","App","isMenuOpen","maxBeats","minBeats","maxClicks","minClicks","lightTheme","darkTheme","href","faGithub","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.5ffa1761.chunk.js","sourcesContent":["\n\t\t\t\tvar addMethods = require(\"../node_modules/workerize-loader/dist/rpc-wrapper.js\")\n\t\t\t\tvar methods = []\n\t\t\t\tmodule.exports = function() {\n\t\t\t\t\tvar w = new Worker(__webpack_public_path__ + \"5229467faaf4ec1feba7.worker.js\", { name: \"[hash].worker.js\" })\n\t\t\t\t\taddMethods(w, methods)\n\t\t\t\t\t\n\t\t\t\t\treturn w\n\t\t\t\t}\n\t\t\t","import React from 'react';\r\n\r\nexport default class Canvas extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    \r\n    this.canvasRef = React.createRef();\r\n    this.resetCanvas = this.resetCanvas.bind(this);\r\n\r\n    window.onorientationchange = this.resetCanvas;\r\n    window.onresize = this.resetCanvas;\r\n\r\n    this.curNote = null;\r\n  }\r\n  \r\n  componentDidMount() {\r\n    this.resetCanvas();\r\n  }\r\n  \r\n  componentDidUpdate() {\r\n    this.drawCanvas();\r\n  }\r\n\r\n  resetCanvas() {\r\n    this.canvasRef.current.width = window.innerWidth;\r\n    //this.canvasRef.current.height = window.innerHeight;\r\n    window.scrollTo(0,0); \r\n    this.drawCanvas();\r\n\r\n  }\r\n  \r\n  drawCanvas() {\r\n    const canvas = this.canvasRef.current;\r\n    const ctx = canvas.getContext(\"2d\");\r\n\r\n    ctx.fillStyle = this.props.theme.background;\r\n    ctx.globalAlpha = 1;\r\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n    let circleRadius = Math.min(canvas.width / this.props.beatsPerBar / 5, 36);\r\n\r\n    for (let i = 0; i < this.props.beatsPerBar; i++) {\r\n      ctx.fillStyle= this.props.theme.light;\r\n      ctx.globalAlpha = 1;\r\n      ctx.shadowBlur = 0;\r\n\r\n      if (this.props.curNote) {\r\n        if (this.props.curNote.beat === i && this.props.curNote.click === 0) {\r\n          this.curNote = this.props.curNote;\r\n        }\r\n      }\r\n        \r\n      if (this.curNote?.beat === i) {\r\n        /* let percentage = this.props.percentage;\r\n        1-percentage > .9 ? ctx.globalAlpha = 1-percentage*9 : ctx.globalAlpha = 0;*/\r\n        if (this.props.isplaying) {\r\n          ctx.fillStyle=\"red\";\r\n          ctx.shadowColor='red';\r\n          ctx.shadowBlur= circleRadius;\r\n        } else {\r\n          this.curNote = null;\r\n        }\r\n      }\r\n\r\n      ctx.beginPath();\r\n      ctx.arc(i * (canvas.width/this.props.beatsPerBar) + (canvas.width/this.props.beatsPerBar/2), canvas.height/2, circleRadius, 0, Math.PI * 2);\r\n      ctx.fill();\r\n    }\r\n  }\r\n  \r\n  render() {\r\n    return (\r\n      <div className=\"visualizer\">\r\n        <canvas ref={this.canvasRef} id=\"canvas\" height=\"100\" width=\"100\"/>  \r\n      </div>\r\n    );\r\n  }\r\n}","import React from 'react';\r\nimport Canvas from './Canvas.js';\r\n\r\nexport default class Animation extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    \r\n    this.state = {\r\n      lastNoteDrawn: null,\r\n      nextNoteTime: 0,\r\n      percentage: 0,\r\n      curNote: null,\r\n    }\r\n    \r\n    this.updateAnimation = this.updateAnimation.bind(this);\r\n  }\r\n  \r\n  componentDidMount() {\r\n    this.rAF = requestAnimationFrame(this.updateAnimation);\r\n  }\r\n  \r\n  updateAnimation() {\r\n    if (this.props.isplaying) {\r\n\r\n      let currentTime = this.props.audiocontext.currentTime;\r\n      let notesInQueue = this.props.queue;\r\n      let currentNote = this.state.lastNoteDrawn;\r\n\r\n      while (notesInQueue.length && notesInQueue[0].time < currentTime) {\r\n          currentNote = notesInQueue[0];\r\n          notesInQueue.splice(0,1);\r\n      }\r\n\r\n      let percentage = ((60/this.props.tempo) - (this.props.nbt - currentTime)) / (60/this.props.tempo);\r\n      if (percentage < 0) percentage = 0;\r\n      if (percentage > 1) percentage = 1;\r\n\r\n      if (currentNote !== this.state.lastNoteDrawn) {\r\n\r\n        this.setState((state, props) => ({\r\n          percentage: percentage,\r\n          nextNoteTime: currentNote.time + (60 / props.tempo),\r\n        }));\r\n\r\n      } else {\r\n        this.setState((state, props) => ({\r\n          percentage: percentage\r\n        }));\r\n\r\n      }\r\n\r\n      this.setState((state, props) => ({\r\n        curNote: currentNote\r\n      }));\r\n    }\r\n    this.rAF = requestAnimationFrame(this.updateAnimation);\r\n  }\r\n  \r\n  componentWillUnmount() {\r\n    cancelAnimationFrame(this.rAF);\r\n  }\r\n  \r\n  render () {\r\n    return (\r\n      <Canvas \r\n        percentage={this.state.percentage} \r\n        isplaying={this.props.isplaying} \r\n        beatsPerBar={this.props.beatsPerBar}\r\n        curNote={this.state.curNote}\r\n        theme={this.props.theme}\r\n      />\r\n    )\r\n  }\r\n}","import React from 'react';\r\n\r\nexport default class Button extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        if (this.props.increment === true) {\r\n            return(\r\n                <button \r\n                    name={\"increment-\" + this.props.id} \r\n                    onClick={this.props.onClick} \r\n                    className=\"btn-circle\"\r\n                >+</button>\r\n            )\r\n        } else {\r\n            return(\r\n                <button \r\n                    name={\"decrement-\" + this.props.id} \r\n                    onClick={this.props.onClick}  \r\n                    className=\"btn-circle\"\r\n                >â€“</button>\r\n            )\r\n        }\r\n    }\r\n}","import React from 'react';\r\nimport Button from './Button';\r\n  \r\nfunction Slider(props) {\r\n  return (\r\n    <div className=\"slider-row\">\r\n      <input \r\n        type=\"range\" \r\n        id=\"tempo\" \r\n        min={props.minTempo} \r\n        max={props.maxTempo} \r\n        step=\"1\"\r\n        value={props.tempo}\r\n        onChange={props.onChange}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default class TempoInputs extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n    }\r\n  \r\n    render() {\r\n      return (\r\n        <>\r\n          <div className=\"tempo-input-row\">\r\n            <Button increment={false} id=\"tempo\" onClick={this.props.onClick} />\r\n            <div className=\"tempo-label\">\r\n              <span id=\"tempo-label\">{this.props.tempo}</span><span className=\"bpm-label\">&nbsp;bpm</span>\r\n            </div>\r\n            <Button increment={true} id=\"tempo\" onClick={this.props.onClick} />\r\n          </div>\r\n          <Slider onChange={this.props.onChange} tempo={this.props.tempo} maxTempo={this.props.maxTempo} minTempo={this.props.minTempo}/>\r\n        </>\r\n      )\r\n    }\r\n  }","import React from 'react';\r\nimport Animation from './Animation';\r\nimport TempoInputs from './TempoInputs';\r\nimport worker from 'workerize-loader!./worker' // eslint-disable-line import/no-webpack-loader-syntax\r\nimport { faPlay } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { faStop } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\nclass Note {\r\n  constructor(time = 0, beat = 0, click = 0) {\r\n    this.time = time;\r\n    this.beat = beat;\r\n    this.click = click;\r\n  }\r\n}\r\n\r\nfunction PlayButton(props) {\r\n  const playElement = <FontAwesomeIcon icon={faPlay} />;\r\n  const stopElement = <FontAwesomeIcon icon={faStop} />;\r\n  return (\r\n    <div className=\"play-row\">\r\n      <button className=\"btn-circle large\" onClick={props.onClick} name=\"play-button\">\r\n        {props.value === \"Start\" ? playElement : stopElement}\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\n/***\r\n * \r\n * MAIN METRONOME COMPONENT\r\n * \r\n ***/\r\n\r\nexport default class Metronome extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      \r\n      this.state = {\r\n        noteLength: .05,\r\n        lookahead: 25,\r\n        scheduleAheadTime: .1,\r\n\r\n        tempo: 120,\r\n        maxTempo: 240,\r\n        minTempo: 30,\r\n\r\n        nextBeat: 0,\r\n        nextBeatTime: 0,\r\n\r\n        nextClick: 0,\r\n        nextClickTime: 0,\r\n\r\n        isPlaying: false,\r\n        audioUnlocked: false,\r\n        noteQueue: [],      \r\n\r\n        beatsPerBar: 4,\r\n        clicksPerBeat: 1,\r\n      };\r\n      \r\n      this.handleChange = this.handleChange.bind(this);\r\n      this.handleClick = this.handleClick.bind(this);\r\n      this.handleTick = this.handleTick.bind(this);\r\n  \r\n      var AudioContext = window.AudioContext\r\n                      || window.webkitAudioContext\r\n                      || false; \r\n      this.audioContext = new AudioContext({\r\n        sampleRate: 44100\r\n      });\r\n     \r\n      this.unlockAudio();\r\n  \r\n      this.timerWorker = worker();\r\n      this.timerWorker.onmessage = (e) => {\r\n        if (e.data === \"tick\") {\r\n          this.handleTick();\r\n        }\r\n        else\r\n          console.log(\"Worker: \" + e.data);\r\n      };\r\n      this.timerWorker.postMessage({\"interval\":this.state.lookahead});\r\n    }\r\n  \r\n    scheduleNote(note) {\r\n      var osc = this.audioContext.createOscillator();\r\n      var gainNode = this.audioContext.createGain();\r\n      osc.connect(gainNode);\r\n      gainNode.connect(this.audioContext.destination);\r\n\r\n      if (note.beat !== 0) {\r\n        osc.frequency.value = 440.0;\r\n      } else {\r\n        osc.frequency.value = 880.0;\r\n      }\r\n      if (note.click !== 0) {\r\n        osc.frequency.value = 330.0;\r\n      }\r\n  \r\n      osc.start(this.state.nextClickTime);\r\n      gainNode.gain.setTargetAtTime(0, this.state.nextClickTime + this.state.noteLength, 0.015);\r\n      osc.stop(this.state.nextClickTime + this.state.noteLength*2);\r\n    }\r\n  \r\n    handleTick() {\r\n      if (!this.state.isPlaying) return;\r\n\r\n      while (this.state.nextClickTime < this.audioContext.currentTime + this.state.scheduleAheadTime) {  \r\n        let nextBeat = this.state.nextBeat;\r\n        let nextClick = this.state.nextClick;\r\n        let secondsPerBeat = 60.0 / this.state.tempo;\r\n        let nextBeatTime = this.state.nextBeatTime;\r\n      \r\n        let nextNote = new Note(this.state.nextClickTime, nextBeat, nextClick);  \r\n        if (nextNote.click === 0) {\r\n          nextBeatTime = nextNote.time + secondsPerBeat;\r\n        }\r\n        this.scheduleNote(nextNote);\r\n  \r\n        if (this.state.clicksPerBeat > 1) {\r\n          nextClick++;\r\n          if (nextClick >= this.state.clicksPerBeat) {\r\n            nextClick = 0;\r\n            nextBeat++;\r\n            if (nextBeat >= /* this.props. */this.state.beatsPerBar) {\r\n              nextBeat = 0;\r\n            }\r\n          }\r\n        } else {\r\n          nextBeat++;\r\n          nextClick = 0;\r\n          if (nextBeat >= /* this.props. */this.state.beatsPerBar) {\r\n            nextBeat = 0;\r\n          }\r\n        }\r\n  \r\n        this.setState((state, props) => {\r\n          const queue = state.noteQueue.concat(nextNote);\r\n          return {\r\n            noteQueue: queue,\r\n            nextClickTime: state.nextClickTime + 1/this.state.clicksPerBeat * secondsPerBeat,\r\n            nextBeatTime: nextBeatTime,\r\n            nextBeat: nextBeat,\r\n            nextClick: nextClick\r\n          };\r\n        });\r\n      }\r\n    }\r\n\r\n    unlockAudio() {\r\n      var buffer = this.audioContext.createBuffer(1, 1, 22050);\r\n      var node = this.audioContext.createBufferSource();\r\n      node.buffer = buffer;\r\n      node.start(this.audioContext.currentTime);\r\n    }\r\n  \r\n    fadeAnimation(id) {\r\n      document.getElementById(id).classList.remove(\"animation-fade\");\r\n      void document.getElementById(id).offsetWidth;\r\n      document.getElementById(id).classList.add(\"animation-fade\");\r\n    }\r\n    \r\n    handleClick(e) {\r\n      let nextTempo = 0;\r\n      switch (e.target.name) {\r\n        case \"increment-tempo\":\r\n          this.fadeAnimation(\"tempo-label\");\r\n          nextTempo = parseInt(this.state.tempo)+1;\r\n          this.setState(state => ({tempo: nextTempo > state.maxTempo ? state.tempo : nextTempo}));\r\n          return;\r\n        case \"decrement-tempo\":\r\n          this.fadeAnimation(\"tempo-label\");\r\n          nextTempo = parseInt(this.state.tempo)-1;\r\n          this.setState(state => ({tempo: nextTempo < state.minTempo ? state.tempo : nextTempo}));\r\n          return;\r\n        default:\r\n          break;\r\n      }\r\n\r\n      this.timerWorker.postMessage(this.state.isPlaying ? \"stop\" : \"start\");\r\n\r\n      if (this.state.isPlaying) {\r\n        this.audioContext.close();\r\n\r\n        this.setState(state => ({\r\n          isPlaying: !state.isPlaying,\r\n          audioUnlocked: false,\r\n          noteQueue: [],\r\n          nextClickTime: 0,\r\n          nextBeat: 0,\r\n          nextClick: 0\r\n        }));\r\n      }\r\n      else {\r\n        let AudioContext = window.AudioContext\r\n                         || window.webkitAudioContext\r\n                         || false; \r\n        this.audioContext = new AudioContext({\r\n          sampleRate: 44100\r\n        });\r\n                       \r\n\r\n        if (!this.state.audioUnlocked) {\r\n          this.unlockAudio();\r\n        }\r\n\r\n        this.setState(state => ({\r\n          isPlaying: !state.isPlaying,\r\n          audioUnlocked: true\r\n        }));\r\n      }\r\n    }\r\n    \r\n    handleChange(e) {\r\n      if (e.target.name === \"beat-select\") {\r\n        this.setState({beatsPerBar: e.target.value});\r\n        return;\r\n      }\r\n      if (e.target.name === \"click-select\") {\r\n        this.setState({clicksPerBeat: e.target.value});\r\n        return;\r\n      }\r\n\r\n      this.fadeAnimation(\"tempo-label\");\r\n      this.setState({tempo: e.target.value});\r\n    }\r\n  \r\n    render() {\r\n      return (\r\n        <>\r\n          <TempoInputs \r\n            onChange={this.handleChange} \r\n            onClick={this.handleClick} \r\n            tempo={this.state.tempo} \r\n            maxTempo={this.state.maxTempo} \r\n            minTempo={this.state.minTempo} />\r\n          <Animation \r\n            tempo={this.state.tempo} \r\n            nbt={this.state.nextBeatTime} \r\n            isplaying={this.state.isPlaying} \r\n            queue={this.state.noteQueue} \r\n            audiocontext={this.audioContext} \r\n            beatsPerBar={this.state.beatsPerBar} \r\n            theme={this.props.theme}\r\n            />\r\n          <PlayButton value={this.state.isPlaying ? \"Stop\" : \"Start\"} onClick={this.handleClick} />\r\n          <div className=\"settings-row\">\r\n\r\n            <div className=\"select-wrapper\">\r\n              <select \r\n                value={this.state.beatsPerBar} \r\n                onChange={this.handleChange}\r\n                name=\"beat-select\"\r\n              >\r\n                <option value=\"2\">2/4</option>\r\n                <option value=\"3\">3/4</option>\r\n                <option value=\"4\">4/4</option>\r\n                <option value=\"5\">5/4</option>\r\n                <option value=\"6\">6/4</option>\r\n                <option value=\"7\">7/4</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"select-wrapper\">\r\n              <select \r\n                value={this.state.clicksPerBeat} \r\n                onChange={this.handleChange}\r\n                name=\"click-select\"\r\n              >\r\n                <option value=\"1\">1 click</option>\r\n                <option value=\"2\">2 clicks</option>\r\n                <option value=\"3\">3 clicks</option>\r\n                <option value=\"4\">4 clicks</option>\r\n                <option value=\"5\">5 clicks</option>\r\n                <option value=\"6\">6 clicks</option>\r\n                <option value=\"7\">7 clicks</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </>\r\n      );\r\n    }\r\n  }","import React from 'react';\r\nimport Button from './Button';\r\n\r\nexport default class Spinner extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <fieldset>\r\n        <label>{this.props.label}</label>\r\n        <div className=\"spinner\">\r\n          <Button increment={false} id={this.props.id} onClick={this.props.onClick} />\r\n          <span className=\"spinner-value\" id={this.props.id} >{this.props.value}</span>\r\n          <Button increment={true} id={this.props.id} onClick={this.props.onClick} />\r\n        </div>\r\n      </fieldset>\r\n    )\r\n  }\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Metronome from './Metronome';\nimport Spinner from './Spinner';\nimport 'normalize.css';\nimport './styles/main.css';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faMusic, faSun, faMoon } from \"@fortawesome/free-solid-svg-icons\";\nimport { faGithub } from '@fortawesome/free-brands-svg-icons';\n\nclass Navbar extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <div className=\"navbar\">\n        <div className=\"logo\">\n          <FontAwesomeIcon icon={faMusic} />&nbsp;&nbsp;&nbsp;Metronome\n        </div>\n        <div>\n          <button onClick={this.props.toggleTheme}>\n            {\n              this.props.theme === \"dark\" ? \n              <><FontAwesomeIcon icon={faSun} />&nbsp;&nbsp;Too dark?</>\n              :\n              <><FontAwesomeIcon icon={faMoon} />&nbsp;&nbsp;Too bright?</>\n            }\n            \n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isMenuOpen: false,\n      maxBeats: 12,\n      minBeats: 1,\n      maxClicks: 12,\n      minClicks: 1,\n      lightTheme: {\n        background: \"#f0f0f0\",\n        light: \"#ccc\",\n      },\n      darkTheme: {\n        background: \"#424242\",\n        light: \"#595959\"\n      },\n      theme: \"dark\"\n    };\n\n    this.toggleTheme = this.toggleTheme.bind(this);\n  }\n\n  toggleTheme() {\n    this.setState((state) => ({ theme: state.theme === \"dark\" ? \"light\" : \"dark\"}));\n  }\n\n  fadeAnimation(id) {\n    document.getElementById(id).classList.remove(\"animation-fade\");\n    void document.getElementById(id).offsetWidth;\n    document.getElementById(id).classList.add(\"animation-fade\");\n  }\n\n  render() {\n    return(\n      <div className={this.state.theme === \"dark\" ? \"theme-dark\" : \"theme-light\"}>\n        <div className=\"app-wrapper\">\n          <div className=\"app\">\n            <Navbar onClick={null} toggleTheme={this.toggleTheme} theme={this.state.theme} />\n            <Metronome \n              theme={this.state.theme === \"dark\" ? this.state.darkTheme : this.state.lightTheme} \n            />\n          </div>  \n          <footer>\n            <a href=\"https://github.com/aviolin/metronome/\" target=\"_blank\"><FontAwesomeIcon icon={faGithub} />&nbsp;&nbsp;View the source on Github</a>\n            <p>&copy; 2021, Arlo Adams</p>\n          </footer>\n        </div>\n      </div>\n    ); \n  }\n}\n\n// ========================================\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}