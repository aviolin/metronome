{"version":3,"sources":["worker.js","index.js"],"names":["addMethods","methods","module","exports","w","Worker","name","Button","props","playElement","icon","faPlay","stopElement","faStop","className","onClick","value","Slider","type","id","min","minTempo","max","maxTempo","step","tempo","onChange","Canvas","state","canvasRef","React","createRef","resetCanvas","bind","window","onorientationchange","onresize","this","drawCanvas","current","width","innerWidth","height","innerHeight","scrollTo","canvas","ctx","getContext","color","fillStyle","globalAlpha","fillRect","isplaying","percentage","nbt","currenttime","tick","console","log","curBeat","strokeStyle","beginPath","lineWidth","arc","Math","PI","stroke","ref","Component","Animation","lastNoteDrawn","alpha","percentToNextNote","nextNoteTime","updateAnimation","rAF","requestAnimationFrame","currentTime","audiocontext","notesInQueue","queue","currentNote","length","time","splice","setState","cancelAnimationFrame","bpb","nextnotetime","TempoInputs","RadioButton","radioElement","default","defaultChecked","htmlFor","Spinner","label","Metronome","beatsPerBar","maxBeats","minBeats","clicksPerBeat","maxClicks","minClicks","nextBeat","nextBeatTime","nextClick","isPlaying","lookahead","scheduleAheadTime","noteLength","audioUnlocked","noteQueue","isMenuOpen","handleChange","handleClick","handleTick","audioContext","AudioContext","timerWorker","worker","onmessage","e","data","postMessage","note","osc","createOscillator","gainNode","createGain","connect","destination","beat","frequency","click","start","gain","setTargetAtTime","stop","nextNote","Note","secondsPerBeat","nextBT","scheduleNote","concat","document","getElementById","classList","remove","offsetWidth","add","target","buffer","createBuffer","node","createBufferSource","fadeAnimation","nextClicks","parseInt","nextBeats","nextTempo","Navbar","faEllipsisV","faTimes","MobileMenu","classes","faCheck","size","href","App","colorHighlight","updateColors","col","colHighlight","root","documentElement","style","setProperty","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.838188e7.chunk.js","sourcesContent":["\n\t\t\t\tvar addMethods = require(\"../node_modules/workerize-loader/dist/rpc-wrapper.js\")\n\t\t\t\tvar methods = []\n\t\t\t\tmodule.exports = function() {\n\t\t\t\t\tvar w = new Worker(__webpack_public_path__ + \"c737dd0979893d18313b.worker.js\", { name: \"[hash].worker.js\" })\n\t\t\t\t\taddMethods(w, methods)\n\t\t\t\t\t\n\t\t\t\t\treturn w\n\t\t\t\t}\n\t\t\t","import React from 'react';\nimport ReactDOM from 'react-dom';\n\n//import worker from \"./worker.js\";\nimport worker from 'workerize-loader!./worker' // eslint-disable-line import/no-webpack-loader-syntax\n\nimport './App.css';\n\n// get our fontawesome imports\nimport { faPlay } from \"@fortawesome/free-solid-svg-icons\";\nimport { faStop } from \"@fortawesome/free-solid-svg-icons\";\nimport { faMoon } from \"@fortawesome/free-solid-svg-icons\";\nimport {faEllipsisV} from \"@fortawesome/free-solid-svg-icons\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport { faCheck } from \"@fortawesome/free-solid-svg-icons\";\n\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n//import Metronome from './App';\n\n\n\n\n\n/***\n * \n * INPUTS\n * \n */\n\n\nfunction Button(props) {\n  const playElement = <FontAwesomeIcon icon={faPlay} />;\n  const stopElement = <FontAwesomeIcon icon={faStop} />;\n  return (\n    <button \n      className=\"button-play\" \n      onClick={props.onClick}\n      name=\"play-button\"\n    >\n      {props.value === \"Start\" ? playElement : stopElement}\n    </button>\n  );\n}\n\nfunction Slider(props) {\n  return (\n    <input \n      type=\"range\" \n      id=\"tempo\" \n      min={props.minTempo} \n      max={props.maxTempo} \n      step=\"1\"\n      value={props.tempo}\n      onChange={props.onChange}/>\n  )\n}\n\n\n\n\n\n\n\n/***\n * \n * CANVAS\n * \n */\n\nclass Canvas extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {};\n    this.canvasRef = React.createRef();\n\n    this.resetCanvas = this.resetCanvas.bind(this);\n\n    window.onorientationchange = this.resetCanvas;\n    window.onresize = this.resetCanvas;\n  }\n  \n  componentDidMount() {\n    this.drawCanvas();\n    this.resetCanvas();\n  }\n  \n  componentDidUpdate() {\n    this.drawCanvas();\n  }\n\n  resetCanvas() {\n    this.canvasRef.current.width = window.innerWidth;\n    this.canvasRef.current.height = window.innerHeight;\n    window.scrollTo(0,0); \n  }\n  \n  drawCanvas() {\n    const canvas = this.canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    let color = \"#333\";\n    ctx.fillStyle = color;\n    ctx.globalAlpha = 1;\n\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n    if (!this.props.isplaying) return;\n\n\n    let percentage = ((60/this.props.tempo) - (this.props.nbt - this.props.currenttime)) / (60/this.props.tempo);\n    if (percentage < 0) percentage = 0;\n\n    color = this.props.color;\n    if (this.props.tick === true) {\n      //color = \"#eee\";\n      //percentage = 0;\n      //ctx.fillStyle = \"#ffaaff\";\n      //ctx.fill();    \n    }\n\n    console.log(this.props.curBeat);\n\n    ctx.strokeStyle = color;\n    ctx.globalAlpha = 1-percentage; //this.props.alpha;\n    ctx.beginPath();\n    ctx.lineWidth = 100-percentage*100;\n    //ctx.arc(canvas.width/2, canvas.height/3, percentage * 200, 0 + Math.PI / 2*this.props.curBeat, Math.PI / 2*this.props.curBeat+1);\n    ctx.arc(canvas.width/2, canvas.height/4, percentage * 100, 0, Math.PI * 2);\n\n    ctx.stroke(); \n    //ctx.fillStyle = \"#ffaaff\";\n    //ctx.fill();    \n  }\n  \n  render() {\n    return (\n      <canvas ref={this.canvasRef} id=\"canvas\" height=\"100\" width=\"100\"/>  \n    );\n  }\n}\n\nclass Animation extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n      tick: false,\n      lastNoteDrawn: null,\n      alpha: 0,\n      percentToNextNote: 0,\n      nextNoteTime: 0\n    }\n    \n    this.updateAnimation = this.updateAnimation.bind(this);\n  }\n  \n  componentDidMount() {\n    this.rAF = requestAnimationFrame(this.updateAnimation);\n  }\n  \n  updateAnimation() {\n    if (this.props.isplaying) {\n\n      let currentTime = this.props.audiocontext.currentTime;\n      let notesInQueue = this.props.queue;\n      let currentNote = this.state.lastNoteDrawn;\n\n  \n      while (notesInQueue.length && notesInQueue[0].time < currentTime) {\n          currentNote = notesInQueue[0];\n          notesInQueue.splice(0,1);\n      }\n\n      if (currentNote !== this.state.lastNoteDrawn) {\n        this.setState((state, props) => ({\n          tick: true,\n          alpha: 1,\n          percentToNextNote: 0,\n          nextNoteTime: currentNote.time + (60 / props.tempo)\n\n        }));\n      } else {\n\n        \n\n        this.setState((state, props) => ({\n          tick: false,\n          alpha: state.alpha - .1 < 0 ? 0 : state.alpha-.1,\n        }));\n      }\n    } else {\n        this.setState(state => ({\n          tick: false,\n          alpha: state.alpha - .1 < 0 ? 0 : state.alpha-.1\n        }));\n    }\n    \n    this.rAF = requestAnimationFrame(this.updateAnimation);\n  }\n  \n  componentWillUnmount() {\n    cancelAnimationFrame(this.rAF);\n  }\n  \n  render () {\n    return (\n      <Canvas tick={this.state.tick} color={this.props.color} nbt={this.props.nbt} curBeat={this.props.curBeat} bpb={this.props.bpb} queue={this.props.queue} tempo={this.props.tempo} nextnotetime={this.state.nextNoteTime} alpha={this.state.alpha} currenttime={this.props.audiocontext.currentTime} isplaying={this.props.isplaying}/>\n    )\n  }\n}\n\n\n\n\n\n\n\nclass TempoInputs extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <div className=\"input-row\">\n        <div className=\"tempo-input-row\">\n          <button className=\"button-tempo\" name=\"decrement-tempo\" onClick={this.props.onClick}>–</button>\n          <div className=\"tempo-label\">\n            <span className=\"large\" id=\"tempo-label\">{this.props.tempo}</span> BPM\n          </div>\n          <button className=\"button-tempo\" name=\"increment-tempo\" onClick={this.props.onClick}>+</button>\n        </div>\n        <Slider onChange={this.props.onChange} tempo={this.props.tempo} maxTempo={this.props.maxTempo} minTempo={this.props.minTempo}/>\n      </div>\n    )\n  }\n}\n\nfunction RadioButton(props) {\n  var radioElement = <input \n                        className=\"checkbox\"\n                        type=\"radio\" \n                        id={props.id + \"-\" + props.value}\n                        name={props.id}\n                        value={props.value}\n                      />\n  if (props.default===props.id) {\n    radioElement = <input \n                      className=\"checkbox\"\n                      type=\"radio\" \n                      id={props.id + \"-\" + props.value}\n                      name={props.id}\n                      value={props.value}\n                      defaultChecked\n                    />\n  }\n  return (\n    <span>\n      {radioElement}\n      <label htmlFor={props.id + \"-\" + props.value}>{props.value}</label>\n    </span>\n  )\n}\n\nclass RadioInputs extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let label = this.props.label;\n    if (this.props.value > 1) {\n      if (this.props.id === \"beats\") {\n        label = \" beats per bar\";\n      } else {\n        label = \" clicks per beat\";\n      }\n    }\n\n    return (\n      <div className=\"radio-input-section\">\n        <div className=\"label\"><b>{this.props.value}</b>{label}</div>\n        <div className=\"radio-scrollable\"  onChange={this.props.onChange}>\n          <RadioButton value=\"1\" id={this.props.id} default=\"clicks\" />\n          <RadioButton value=\"2\" id={this.props.id}/>\n          <RadioButton value=\"3\" id={this.props.id}/>\n          <RadioButton value=\"4\" id={this.props.id} default=\"beats\" />\n          <RadioButton value=\"5\" id={this.props.id}/>\n          <RadioButton value=\"6\" id={this.props.id}/>\n          <RadioButton value=\"7\" id={this.props.id}/>\n          <RadioButton value=\"8\" id={this.props.id}/>\n          <RadioButton value=\"9\" id={this.props.id}/>\n          <RadioButton value=\"10\" id={this.props.id}/>\n          <RadioButton value=\"11\" id={this.props.id}/>\n          <RadioButton value=\"12\" id={this.props.id}/>\n        </div>\n      </div>\n    )\n  }\n\n}\n\nclass Spinner extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <fieldset>\n        <label>{this.props.label}</label>\n        <div className=\"spinner\">\n          <button className=\"button-medium\" name={\"decrement-\" + this.props.id} onClick={this.props.onClick}>–</button>\n          {/*<input type=\"number\" id={this.props.id} value={this.props.value}></input>*/}\n          <span className=\"spinner-value\" id={this.props.id} >{this.props.value}</span>\n          <button className=\"button-medium\" name={\"increment-\" + this.props.id} onClick={this.props.onClick}>+</button>\n        </div>\n      </fieldset>\n    )\n  }\n}\n\n\n\n\n/***\n * \n * MAIN METRONOME COMPONENT\n * \n */\n\nclass Metronome extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n      tempo: 120,\n      maxTempo: 240,\n      minTempo: 30,\n      beatsPerBar: 4,\n      maxBeats: 12,\n      minBeats: 1,\n      clicksPerBeat: 1,\n      maxClicks: 12,\n      minClicks: 1,\n      nextBeat: 0,\n      nextBeatTime: 0,\n      nextClick: 0,\n      isPlaying: false,\n      lookahead: 25,\n      scheduleAheadTime: .1,\n      nextNoteTime: 0,\n      noteLength: .1,\n      audioUnlocked: false,\n      noteQueue: [],      \n      isMenuOpen: false\n    };\n    \n    this.handleChange = this.handleChange.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.handleTick = this.handleTick.bind(this);\n\n    this.audioContext = new AudioContext();\n\n    this.timerWorker = worker();\n\n    this.timerWorker.onmessage = (e) => {\n        if (e.data === \"tick\") {\n            this.handleTick();\n        }\n        else\n            console.log(\"message: \" + e.data);\n    };\n\n\n    this.timerWorker.postMessage({\"interval\":this.state.lookahead});\n    \n  }\n\n  scheduleNote(note) {\n    var osc = this.audioContext.createOscillator();\n    var gainNode = this.audioContext.createGain();\n    osc.connect(gainNode);\n    gainNode.connect(this.audioContext.destination);\n    if (note.beat != 0) {\n      osc.frequency.value = 440.0;\n    } else {\n      osc.frequency.value = 880.0;\n    }\n    if (note.click != 0) {\n      osc.frequency.value = 330.0;\n    }\n\n    osc.start( this.state.nextNoteTime);\n    gainNode.gain.setTargetAtTime(0, this.state.nextNoteTime + this.state.noteLength, 0.015);\n    osc.stop( this.state.nextNoteTime + this.state.noteLength*2);\n\n  }\n\n  handleTick() {\n    while (this.state.nextNoteTime < this.audioContext.currentTime + this.state.scheduleAheadTime) {\n\n      let nextBeat = this.state.nextBeat;\n      let nextClick = this.state.nextClick;\n    \n      let nextNote = new Note(this.state.nextNoteTime, nextBeat, nextClick);\n\n      let secondsPerBeat = 60.0 / this.state.tempo;\n\n\n      let nextBT = this.state.nextBeatTime;\n\n      if (nextNote.click == 0) {\n        nextBT = nextNote.time + secondsPerBeat;\n\n      }\n\n      this.scheduleNote(nextNote);\n\n      if (this.state.clicksPerBeat > 1) {\n        nextClick++;\n        if (nextClick >= this.state.clicksPerBeat) {\n          nextClick = 0;\n          nextBeat++;\n          if (nextBeat >= this.state.beatsPerBar) {\n            nextBeat = 0;\n          }\n        }\n      } else {\n        nextBeat++;\n        nextClick = 0;\n        if (nextBeat >= this.state.beatsPerBar) {\n          nextBeat = 0;\n        }\n      }\n\n      \n\n      this.setState(state => {\n        const queue = state.noteQueue.concat(nextNote);\n        \n        return {\n          noteQueue: queue,\n          nextNoteTime: state.nextNoteTime + 1/state.clicksPerBeat * secondsPerBeat,\n          nextBeatTime: nextBT,\n          nextBeat: nextBeat,\n          nextClick: nextClick\n        };\n      });\n    }\n  }\n\n  fadeAnimation(id) {\n    document.getElementById(id).classList.remove(\"animation-fade\");\n    void document.getElementById(id).offsetWidth;\n    document.getElementById(id).classList.add(\"animation-fade\");\n  }\n  \n  handleClick(e) {\n\n    \n\n    if (e.target.name === \"increment-tempo\") {\n      this.fadeAnimation(\"tempo-label\");\n\n      let nextTempo = parseInt(this.state.tempo)+1;\n      this.setState(state => ({tempo: nextTempo > state.maxTempo ? state.tempo : nextTempo}));\n      return;\n    } else if (e.target.name === \"decrement-tempo\") {\n      this.fadeAnimation(\"tempo-label\");\n\n      let nextTempo = parseInt(this.state.tempo)-1;\n      this.setState(state => ({tempo: nextTempo < state.minTempo ? state.tempo : nextTempo}));\n      return;\n    }  else if (e.target.name === \"increment-beats\") {\n      this.fadeAnimation(\"beats\");\n      let nextBeats = parseInt(this.state.beatsPerBar)+1;\n      this.setState(state => ({beatsPerBar: nextBeats > state.maxBeats ? state.beatsPerBar : nextBeats}));\n      return;\n    } else if (e.target.name === \"decrement-beats\") {\n      this.fadeAnimation(\"beats\");\n      let nextBeats = parseInt(this.state.beatsPerBar)-1;\n      this.setState(state => ({beatsPerBar: nextBeats < state.minBeats ? state.beatsPerBar : nextBeats}));\n      return;\n    } else if (e.target.name === \"increment-clicks\") {\n      this.fadeAnimation(\"clicks\");\n      let nextClicks = parseInt(this.state.clicksPerBeat)+1;\n      this.setState(state => ({clicksPerBeat: nextClicks > state.maxClicks ? state.clicksPerBeat : nextClicks}));\n      return;\n    } else if (e.target.name === \"decrement-clicks\") {\n      this.fadeAnimation(\"clicks\");\n      let nextClicks = parseInt(this.state.clicksPerBeat)-1;\n      this.setState(state => ({clicksPerBeat: nextClicks < state.minClicks ? state.clicksPerBeat : nextClicks}));\n      return;\n    }\n\n    this.audioContext = new AudioContext();\n\n\n    this.timerWorker.postMessage(this.state.isPlaying ? \"stop\" : \"start\");\n\n    if (!this.state.audioUnlocked) {\n      var buffer = this.audioContext.createBuffer(1, 1, 22050);\n      var node = this.audioContext.createBufferSource();\n      node.buffer = buffer;\n      node.start(this.audioContext.currentTime);\n    }\n\n    this.setState(state => ({\n      isPlaying: !state.isPlaying,\n      audioUnlocked: true,\n      noteQueue: [],\n      nextNoteTime: 0,\n      nextBeat: 0,\n      nextClick: 0\n    }));\n  }\n  \n  handleChange(e) {\n    if (e.target.name === \"beats\") {\n      this.setState({beatsPerBar: e.target.value});\n    } else if (e.target.name===\"clicks\") {\n      this.setState({clicksPerBeat: e.target.value});\n    } else {\n      this.fadeAnimation(\"tempo-label\");\n\n      console.log(e.target.value);\n      this.setState({tempo: e.target.value});\n    }\n\n  }\n\n  \n  \n  render() {\n    \n\n    return (\n      <div className=\"metronome\">\n        <Animation tempo={this.state.tempo} color={this.props.color} nbt={this.state.nextBeatTime} curBeat={this.state.nextBeat} bpb={this.state.beatsPerBar} isplaying={this.state.isPlaying} queue={this.state.noteQueue} audiocontext={this.audioContext} />\n        <div className=\"inputs\">\n        <Button \n            value={this.state.isPlaying ? \"Stop\" : \"Start\"}\n            onClick={this.handleClick} />\n          <TempoInputs onChange={this.handleChange} tempo={this.state.tempo} onClick={this.handleClick} maxTempo={this.state.maxTempo} minTempo={this.state.minTempo} />\n          \n          <div className=\"input-row\">\n            <div className=\"spinner-inputs\">\n              <Spinner label=\"Beats per bar\" id=\"beats\" onClick={this.handleClick} value={this.state.beatsPerBar} />\n              <Spinner label=\"Clicks per beat\" id=\"clicks\" onClick={this.handleClick} value={this.state.clicksPerBeat} />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\n\n\n\n\nclass Navbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  \n\n  render() {\n\n    let icon = <FontAwesomeIcon icon={faEllipsisV} />\n    if (this.props.isMenuOpen) {\n      icon = <FontAwesomeIcon icon={faTimes} />\n    }\n    \n    return (\n      <div className=\"navbar\">\n\n        <div className=\"logo\">\n          Zen Metronome\n        </div>\n        <button className=\"button-theme-toggle\" name=\"menu-toggle\" onClick={this.props.onClick}>\n          {icon}\n        </button>\n\n      </div>\n\n    ) \n  }\n}\n\nclass MobileMenu extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let classes = \"mobile-menu\";\n    if (this.props.isMenuOpen) {\n      classes += \" mobile-menu-open\";\n    }\n\n    return(\n      <div className={classes}>\n        <div className=\"menu-row\">\n          <button className=\"color color-purple\" value=\"#d7d\" onClick={this.props.onClick}><FontAwesomeIcon icon={faCheck} size=\"xs\"/></button>\n          <button className=\"color color-blue\" value=\"#77d\" onClick={this.props.onClick}></button>\n          <button className=\"color color-green\" value=\"#7d7\" onClick={this.props.onClick}></button>\n          <button className=\"color color-grey\" value=\"#777\" onClick={this.props.onClick}></button>\n        </div>\n        <div className=\"menu-row\">\n          <a href=\"https://aviolin.github.io/metronome\" target=\"_blank\">View the source on Github</a>\n        </div>\n      </div>\n    ) \n  }\n}\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      color: \"#d7d\",\n      colorHighlight: \"#f7f\",\n      isMenuOpen: false\n    };\n\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  handleClick(e) {\n    if (e.target.name === \"menu-toggle\") {\n      this.setState(state => ({\n        isMenuOpen: !state.isMenuOpen\n      }));\n      return;\n    }\n    \n    this.updateColors(e.target.value, e.target.value);\n   \n  }\n\n  updateColors(col, colHighlight) {\n    console.log(\"HERE\");\n    let root = document.documentElement;\n\n    root.style.setProperty('--accentcolor', col);\n    root.style.setProperty('--accentcolorhighlight', colHighlight);\n\n    this.setState(state => ({\n      color: col,\n      colorHighlight: colHighlight,\n      isMenuOpen: !state.isMenuOpen\n    }));\n  }\n\n  render() {\n    let menu = null;\n    if (this.state.isMenuOpen) {\n      menu = <MobileMenu isMenuOpen={this.state.isMenuOpen} onClick={this.handleClick} />;\n    }\n    return(\n      <div>\n        <Navbar onClick={this.handleClick} isMenuOpen={this.state.isMenuOpen}/>\n        <MobileMenu isMenuOpen={this.state.isMenuOpen} onClick={this.handleClick} />\n        <Metronome color={this.state.color} colorHighlight={this.state.colorHighlight} />\n      </div>  \n    ) \n  }\n}\n\n\n\n\n\n\n\n\n\n\n\nclass Note {\n  constructor(time = 0, beat = 0, click = 0) {\n    this.time = time;\n    this.beat = beat;\n    this.click = click;\n  }\n}\n\n\n// ========================================\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}